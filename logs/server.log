
> domain-buying-agent-server@1.0.0 dev
> nodemon index.js

[33m[nodemon] 3.1.10[39m
[33m[nodemon] to restart at any time, enter `rs`[39m
[33m[nodemon] watching path(s): *.*[39m
[33m[nodemon] watching extensions: js,mjs,cjs,json[39m
[32m[nodemon] starting `node index.js`[39m
✅ Stripe service initialized successfully
✅ Email service initialized successfully
🔍 Checking Google API Key...
API Key present: true
API Key length: 39
✅ AI Service initialized successfully
🚀 Server running on port 5000 in development mode
✅ MongoDB Connected: ac-bhz02s5-shard-00-01.xmap8i1.mongodb.net
🔍 CORS check for origin: undefined
✅ No origin - allowing request
[0mGET /health [32m200[0m 2.026 ms - 104[0m
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
[0mPOST /api/domains/purchase [33m400[0m 660.789 ms - 70[0m
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
[0mGET /api/auth/me [36m304[0m 191.427 ms - -[0m
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
[0mGET /api/auth/me [36m304[0m 200.358 ms - -[0m
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
[0mPOST /api/payments/create-intent [32m200[0m 969.720 ms - 182[0m
[0mPOST /api/payments/create-intent [32m200[0m 984.064 ms - 182[0m
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
Retrieving PaymentIntent with ID: pi_3RYEId4g2lUtivUP1OrQR1OI
🔍 CORS check for origin: undefined
✅ No origin - allowing request
🔍 CORS check for origin: undefined
✅ No origin - allowing request
Retrieved PaymentIntent. Status: succeeded
Charges present: false
Charges data length: 0
PaymentIntent status: succeeded
PaymentIntent charges: undefined
PaymentIntent keys: [
  'id',
  'object',
  'amount',
  'amount_capturable',
  'amount_details',
  'amount_received',
  'application',
  'application_fee_amount',
  'automatic_payment_methods',
  'canceled_at',
  'cancellation_reason',
  'capture_method',
  'client_secret',
  'confirmation_method',
  'created',
  'currency',
  'customer',
  'description',
  'invoice',
  'last_payment_error',
  'latest_charge',
  'livemode',
  'metadata',
  'next_action',
  'on_behalf_of',
  'payment_method',
  'payment_method_configuration_details',
  'payment_method_options',
  'payment_method_types',
  'processing',
  'receipt_email',
  'review',
  'setup_future_usage',
  'shipping',
  'source',
  'statement_descriptor',
  'statement_descriptor_suffix',
  'status',
  'transfer_data',
  'transfer_group'
]
Charges not found in PaymentIntent, fetching separately...
[0mPOST /api/payments/confirm-payment [32m200[0m 7488.228 ms - -[0m
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
[0mGET /api/domains/my-domains?page=1&limit=10 [32m200[0m 289.001 ms - -[0m
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
[0mGET /api/domains/my-domains?page=1&limit=10 [36m304[0m 280.822 ms - -[0m
📧 Domain purchase email sent successfully: <c31f2d2d-c26c-ca50-6cca-ff058cdbc4ec@gmail.com>
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
[0mGET /api/auth/me [36m304[0m 188.675 ms - -[0m
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
[0mGET /api/auth/me [36m304[0m 185.649 ms - -[0m
[0mGET /api/domains/my-domains?page=1&limit=10 [36m304[0m 280.850 ms - -[0m
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
[0mGET /api/domains/my-domains?page=1&limit=10 [36m304[0m 285.412 ms - -[0m
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
[0mGET /api/domains/my-domains?page=1&limit=10 [36m304[0m 279.066 ms - -[0m
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
[0mGET /api/domains/my-domains?page=1&limit=10 [36m304[0m 276.434 ms - -[0m
🔍 CORS check for origin: undefined
✅ No origin - allowing request
[0mGET /api/domains/my-domains [32m200[0m 275.174 ms - 647[0m
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
[0mGET /api/auth/me [36m304[0m 186.079 ms - -[0m
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
[0mGET /api/auth/me [36m304[0m 186.012 ms - -[0m
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
[0mGET /api/domains/my-domains?page=1&limit=10 [36m304[0m 278.400 ms - -[0m
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
[0mGET /api/domains/my-domains?page=1&limit=10 [36m304[0m 278.499 ms - -[0m
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
Failed to parse JSON response, extracting domains from text
[0mGET /api/domains/search?q=hello [32m200[0m 8902.568 ms - -[0m
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
[0mPOST /api/domains/purchase [33m400[0m 1329.168 ms - 70[0m
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
[0mGET /api/auth/me [36m304[0m 191.345 ms - -[0m
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
[0mGET /api/auth/me [36m304[0m 192.432 ms - -[0m
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
MongoServerError: E11000 duplicate key error collection: domain-buying-agent.domains index: name_1 dup key: { name: "yourhello" }
    at /mnt/AN_Swapnil_D/Codes/SocioFi/Domain_Buying_Agent/server/node_modules/mongodb/lib/operations/insert.js:50:33
    at /mnt/AN_Swapnil_D/Codes/SocioFi/Domain_Buying_Agent/server/node_modules/mongodb/lib/operations/command.js:84:64
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {
  index: 0,
  code: 11000,
  keyPattern: { name: 1 },
  keyValue: { name: 'yourhello' },
  [Symbol(errorLabels)]: Set(0) {}
}
[0mPOST /api/payments/create-intent [33m400[0m 321.538 ms - 522[0m
[0mPOST /api/payments/create-intent [32m200[0m 1047.207 ms - 182[0m
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
[0mGET /api/domains/my-domains?page=1&limit=10 [32m200[0m 280.043 ms - -[0m
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
[0mGET /api/domains/my-domains?page=1&limit=10 [36m304[0m 283.835 ms - -[0m
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
Failed to parse JSON response, extracting domains from text
[0mGET /api/domains/search?q=hello [32m200[0m 8726.707 ms - -[0m
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
[0mPOST /api/domains/purchase [33m400[0m 512.212 ms - 70[0m
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
[0mGET /api/auth/me [36m304[0m 193.594 ms - -[0m
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
[0mGET /api/auth/me [36m304[0m 190.625 ms - -[0m
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
MongoServerError: E11000 duplicate key error collection: domain-buying-agent.domains index: name_1 dup key: { name: "hellodigital" }
    at /mnt/AN_Swapnil_D/Codes/SocioFi/Domain_Buying_Agent/server/node_modules/mongodb/lib/operations/insert.js:50:33
    at /mnt/AN_Swapnil_D/Codes/SocioFi/Domain_Buying_Agent/server/node_modules/mongodb/lib/operations/command.js:84:64
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {
  index: 0,
  code: 11000,
  keyPattern: { name: 1 },
  keyValue: { name: 'hellodigital' },
  [Symbol(errorLabels)]: Set(0) {}
}
[0mPOST /api/payments/create-intent [33m400[0m 293.149 ms - 525[0m
[0mPOST /api/payments/create-intent [32m200[0m 1007.690 ms - 182[0m
🔍 CORS check for origin: undefined
✅ No origin - allowing request
[0mGET /api/domains/my-domains [32m200[0m 284.896 ms - 647[0m
🔍 CORS check for origin: undefined
✅ No origin - allowing request
[0mGET /api/domains/my-domains [32m200[0m 283.797 ms - 647[0m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node index.js`[39m
✅ Stripe service initialized successfully
✅ Email service initialized successfully
🔍 Checking Google API Key...
API Key present: true
API Key length: 39
✅ AI Service initialized successfully
🚀 Server running on port 5000 in development mode
✅ MongoDB Connected: ac-bhz02s5-shard-00-02.xmap8i1.mongodb.net
🔍 CORS check for origin: undefined
✅ No origin - allowing request
[0mGET /api/domains/my-domains [32m200[0m 303.006 ms - 647[0m
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: undefined
✅ No origin - allowing request
[0mGET /api/domains/my-domains [32m200[0m 274.231 ms - 647[0m
Failed to parse JSON response, extracting domains from text
[0mGET /api/domains/search?q=hello [32m200[0m 8939.021 ms - -[0m
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
[0mPOST /api/domains/purchase [33m400[0m 1713.402 ms - 70[0m
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
[0mGET /api/auth/me [36m304[0m 194.376 ms - -[0m
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
[0mGET /api/auth/me [36m304[0m 198.968 ms - -[0m
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
[0mPOST /api/payments/create-intent [32m200[0m 1128.031 ms - 182[0m
[0mPOST /api/payments/create-intent [32m200[0m 1173.854 ms - 182[0m
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
Retrieving PaymentIntent with ID: pi_3RYEUX4g2lUtivUP1mkA1kKM
🔍 CORS check for origin: undefined
✅ No origin - allowing request
Retrieved PaymentIntent. Status: succeeded
Charges present: false
Charges data length: 0
PaymentIntent status: succeeded
PaymentIntent charges: undefined
PaymentIntent keys: [
  'id',
  'object',
  'amount',
  'amount_capturable',
  'amount_details',
  'amount_received',
  'application',
  'application_fee_amount',
  'automatic_payment_methods',
  'canceled_at',
  'cancellation_reason',
  'capture_method',
  'client_secret',
  'confirmation_method',
  'created',
  'currency',
  'customer',
  'description',
  'invoice',
  'last_payment_error',
  'latest_charge',
  'livemode',
  'metadata',
  'next_action',
  'on_behalf_of',
  'payment_method',
  'payment_method_configuration_details',
  'payment_method_options',
  'payment_method_types',
  'processing',
  'receipt_email',
  'review',
  'setup_future_usage',
  'shipping',
  'source',
  'statement_descriptor',
  'statement_descriptor_suffix',
  'status',
  'transfer_data',
  'transfer_group'
]
Charges not found in PaymentIntent, fetching separately...
🔍 CORS check for origin: undefined
✅ No origin - allowing request
Domain Registration Error: Domain registration failed
Domain registration failed: Failed to register domain
Error: Domain validation failed: status: `payment_completed` is not a valid enum value for path `status`.
    at ValidationError.inspect (/mnt/AN_Swapnil_D/Codes/SocioFi/Domain_Buying_Agent/server/node_modules/mongoose/lib/error/validation.js:50:26)
    at formatValue (node:internal/util/inspect:850:19)
    at inspect (node:internal/util/inspect:387:10)
    at formatWithOptionsInternal (node:internal/util/inspect:2366:40)
    at formatWithOptions (node:internal/util/inspect:2228:10)
    at console.value (node:internal/console/constructor:345:14)
    at console.error (node:internal/console/constructor:412:61)
    at errorHandler (file:///mnt/AN_Swapnil_D/Codes/SocioFi/Domain_Buying_Agent/server/middleware/errorHandler.js:6:11)
    at Layer.handle_error (/mnt/AN_Swapnil_D/Codes/SocioFi/Domain_Buying_Agent/server/node_modules/express/lib/router/layer.js:71:5)
    at trim_prefix (/mnt/AN_Swapnil_D/Codes/SocioFi/Domain_Buying_Agent/server/node_modules/express/lib/router/index.js:326:13) {
  errors: {
    status: ValidatorError: `payment_completed` is not a valid enum value for path `status`.
        at validate (/mnt/AN_Swapnil_D/Codes/SocioFi/Domain_Buying_Agent/server/node_modules/mongoose/lib/schematype.js:1365:13)
        at SchemaType.doValidate (/mnt/AN_Swapnil_D/Codes/SocioFi/Domain_Buying_Agent/server/node_modules/mongoose/lib/schematype.js:1349:7)
        at /mnt/AN_Swapnil_D/Codes/SocioFi/Domain_Buying_Agent/server/node_modules/mongoose/lib/document.js:3004:18
        at process.processTicksAndRejections (node:internal/process/task_queues:85:11) {
      properties: [Object],
      kind: 'enum',
      path: 'status',
      value: 'payment_completed',
      reason: undefined,
      [Symbol(mongoose:validatorError)]: true
    }
  },
  _message: 'Domain validation failed'
}
[0mPOST /api/payments/confirm-payment [33m400[0m 2842.158 ms - 666[0m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node index.js`[39m
✅ Stripe service initialized successfully
✅ Email service initialized successfully
🔍 Checking Google API Key...
API Key present: true
API Key length: 39
✅ AI Service initialized successfully
🚀 Server running on port 5000 in development mode
✅ MongoDB Connected: ac-bhz02s5-shard-00-00.xmap8i1.mongodb.net
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
[0mGET /api/domains/search?q=hello [32m200[0m 9433.919 ms - -[0m
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
[0mPOST /api/domains/purchase [33m400[0m 953.269 ms - 70[0m
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
[0mGET /api/auth/me [36m304[0m 179.838 ms - -[0m
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
[0mGET /api/auth/me [36m304[0m 174.443 ms - -[0m
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
[0mPOST /api/payments/create-intent [32m200[0m 1173.230 ms - 182[0m
[0mPOST /api/payments/create-intent [32m200[0m 1175.009 ms - 182[0m
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
🔍 CORS check for origin: http://localhost:5173
✅ Origin allowed: http://localhost:5173
Retrieving PaymentIntent with ID: pi_3RYEXb4g2lUtivUP1VdTggKR
🔍 CORS check for origin: undefined
✅ No origin - allowing request
🔍 CORS check for origin: undefined
✅ No origin - allowing request
Retrieved PaymentIntent. Status: succeeded
Charges present: false
Charges data length: 0
PaymentIntent status: succeeded
PaymentIntent charges: undefined
PaymentIntent keys: [
  'id',
  'object',
  'amount',
  'amount_capturable',
  'amount_details',
  'amount_received',
  'application',
  'application_fee_amount',
  'automatic_payment_methods',
  'canceled_at',
  'cancellation_reason',
  'capture_method',
  'client_secret',
  'confirmation_method',
  'created',
  'currency',
  'customer',
  'description',
  'invoice',
  'last_payment_error',
  'latest_charge',
  'livemode',
  'metadata',
  'next_action',
  'on_behalf_of',
  'payment_method',
  'payment_method_configuration_details',
  'payment_method_options',
  'payment_method_types',
  'processing',
  'receipt_email',
  'review',
  'setup_future_usage',
  'shipping',
  'source',
  'statement_descriptor',
  'statement_descriptor_suffix',
  'status',
  'transfer_data',
  'transfer_group'
]
Charges not found in PaymentIntent, fetching separately...
Domain Registration Error: Domain registration failed
Domain registration failed: Failed to register domain
Error: Domain validation failed: status: `payment_completed` is not a valid enum value for path `status`.
    at ValidationError.inspect (/mnt/AN_Swapnil_D/Codes/SocioFi/Domain_Buying_Agent/server/node_modules/mongoose/lib/error/validation.js:50:26)
    at formatValue (node:internal/util/inspect:850:19)
    at inspect (node:internal/util/inspect:387:10)
    at formatWithOptionsInternal (node:internal/util/inspect:2366:40)
    at formatWithOptions (node:internal/util/inspect:2228:10)
    at console.value (node:internal/console/constructor:345:14)
    at console.error (node:internal/console/constructor:412:61)
    at errorHandler (file:///mnt/AN_Swapnil_D/Codes/SocioFi/Domain_Buying_Agent/server/middleware/errorHandler.js:6:11)
    at Layer.handle_error (/mnt/AN_Swapnil_D/Codes/SocioFi/Domain_Buying_Agent/server/node_modules/express/lib/router/layer.js:71:5)
    at trim_prefix (/mnt/AN_Swapnil_D/Codes/SocioFi/Domain_Buying_Agent/server/node_modules/express/lib/router/index.js:326:13) {
  errors: {
    status: ValidatorError: `payment_completed` is not a valid enum value for path `status`.
        at validate (/mnt/AN_Swapnil_D/Codes/SocioFi/Domain_Buying_Agent/server/node_modules/mongoose/lib/schematype.js:1365:13)
        at SchemaType.doValidate (/mnt/AN_Swapnil_D/Codes/SocioFi/Domain_Buying_Agent/server/node_modules/mongoose/lib/schematype.js:1349:7)
        at /mnt/AN_Swapnil_D/Codes/SocioFi/Domain_Buying_Agent/server/node_modules/mongoose/lib/document.js:3004:18
        at process.processTicksAndRejections (node:internal/process/task_queues:85:11) {
      properties: [Object],
      kind: 'enum',
      path: 'status',
      value: 'payment_completed',
      reason: undefined,
      [Symbol(mongoose:validatorError)]: true
    }
  },
  _message: 'Domain validation failed'
}
[0mPOST /api/payments/confirm-payment [33m400[0m 3027.309 ms - 666[0m
🔍 CORS check for origin: undefined
✅ No origin - allowing request
Retrieving PaymentIntent with ID: pi_test_123
Stripe Confirm Payment Error: No such payment_intent: 'pi_test_123'
Error: Failed to confirm payment
    at StripeService.confirmPayment (file:///mnt/AN_Swapnil_D/Codes/SocioFi/Domain_Buying_Agent/server/services/stripe.service.js:90:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async confirmPayment (file:///mnt/AN_Swapnil_D/Codes/SocioFi/Domain_Buying_Agent/server/controllers/payment.controller.js:186:27)
[0mPOST /api/payments/confirm-payment [31m500[0m 374.037 ms - 456[0m
🔍 CORS check for origin: undefined
✅ No origin - allowing request
[0mGET /health [32m200[0m 0.351 ms - 104[0m
🔍 CORS check for origin: undefined
✅ No origin - allowing request
Retrieving PaymentIntent with ID: pi_test_123
Stripe Confirm Payment Error: No such payment_intent: 'pi_test_123'
Error: Failed to confirm payment
    at StripeService.confirmPayment (file:///mnt/AN_Swapnil_D/Codes/SocioFi/Domain_Buying_Agent/server/services/stripe.service.js:90:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async confirmPayment (file:///mnt/AN_Swapnil_D/Codes/SocioFi/Domain_Buying_Agent/server/controllers/payment.controller.js:186:27)
[0mPOST /api/payments/confirm-payment [31m500[0m 390.130 ms - 456[0m
🔍 CORS check for origin: undefined
✅ No origin - allowing request
[0mPOST /api/payments/create-intent [32m200[0m 1097.000 ms - 182[0m
🔍 CORS check for origin: undefined
✅ No origin - allowing request
[0mPOST /api/payments/create-intent [32m200[0m 989.846 ms - 182[0m
🔍 CORS check for origin: undefined
✅ No origin - allowing request
[0mPOST /api/payments/create-intent [32m200[0m 911.708 ms - 182[0m
🔍 CORS check for origin: undefined
✅ No origin - allowing request
[0mPOST /api/auth/login [32m200[0m 236.688 ms - 351[0m
📡 MongoDB disconnected
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node index.js`[39m
✅ Stripe service initialized successfully
✅ Email service initialized successfully
🔍 Checking Google API Key...
API Key present: true
API Key length: 39
✅ AI Service initialized successfully
🚀 Server running on port 5000 in development mode
Failed to cleanup old conversations: MongooseError: Operation `aiconversations.updateMany()` buffering timed out after 10000ms
    at Timeout.<anonymous> (/mnt/AN_Swapnil_D/Codes/SocioFi/Domain_Buying_Agent/server/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:185:23)
    at listOnTimeout (node:internal/timers:588:17)
    at process.processTimers (node:internal/timers:523:7)
📡 MongoDB disconnected
❌ MongoDB connection error: queryTxt ETIMEOUT cluster0.xmap8i1.mongodb.net
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting child process[39m
[32m[nodemon] starting `node index.js`[39m
[32m[nodemon] restarting child process[39m
[32m[nodemon] starting `node index.js`[39m
